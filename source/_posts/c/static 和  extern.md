---
title: static 和 extern
date: 2018-04-12 13:30:33
tags: 
  - "typedef"
categories: "c语言学习"
---
## 应用场景

1、 static和extern 是c语言中两个关键字，是用来修饰变量和函数的

- static 和 extern 修饰局部变量的效果

- staitc 和 extern 修饰全局变量的效果

- static 和 extern 修饰函数的效果


## static  修饰局部变量
1、 如果局部变量被static修饰，这个变量就叫做静态变量
2、 静态变量不再存储在栈区域，而是存储在常量区当中
3、 当函数执行完毕之后，静态变量不会被回收。后面再去执行这个函数的时候，声明静态变量的这句话，就不会被再执行了，而是直接略过，直接使用这个静态变量的值
4、 static修饰的静态变量，函数结束不会被回收，仍然存在，函数无论执行多少次，这个静态变量只有一份

## extern 修饰局部变量
1、 extern 不能修饰局部变量


## 全局变量
1、 写一个函数，最完整的步骤应该分两步

- 先写函数的声明
- 再写函数的实现

2、 写一个全局变量，最完整的步骤也应该分两步

- 先写全局变量的声明，只定义全局变量，而不赋值，叫做全局变量的声明
- 再写全局变量的定义，定义全局变量并初始化，叫做全局变量的实现
- 这个时候，全局变量的声明放在使用全局的前面，而全局变量的定义可以放在使用全局变量的后面，使用的时候，仍然可以正常取值
- 如果全局变量，只有声明，没有定义全局变量的值，那么系统会自动初始化为0
- 全局变量也可以只有定义，没有声明，但是这个时候，全局变量必须要定义在使用这个函数的前面

3、 当分模块开发的时候。如果要在模块当中声明全局变量。
- 全局变量的声明要写在 .h文件中
- 全局变量的实现要写在 .c文件中
- 如果将全局变量定义在模块中，这个全局变量就必须使用static 或者 extern修饰
- 如果定义在模块中的全局变量，使用extern修饰，这个模块中的全局变量就可以跨模块访问
- 如果定义在模块中的全局变量，使用static修饰，这个模块中的全局变量就只能在当前定义的模块中访问了，如果跨模块访问，虽然不报错，但是取不到真正的值

## static 和 extern 修饰函数
1、如果函数被extern修饰，那么可以跨模块调用这个函数
2、如果函数被static修饰，那么不可以跨模块调用这个函数，只能在当前模块中调用
3、如果函数没有写static或者extern，那么这个函数默认就是extern


