---
title: 指针
date: 2018-04-12 12:11:33
tags: 
  - "指针"
categories: "c语言学习"
---
## 变量在内存中的存储

1、 不同类型的变量在内存中占据的不同的字节空间
- int 4
- double 8
- float 4
- char 1

2、 内存中存储数据的最小基本单元是字节。每1个字节都有1个内存地址，这个地址是一个十六进制的数。

3、声明1个变量，在内存中是从高字节向低字节分配连续的指定字节数的空间
- int num=10;

字节地址 | 字节单元
---|---
0x199000 | 数据
0x199001 | 数据
0x199002 | 数据
0x199003 | 数据
0x199004 | 数据
0x199005 | 数据
0x199006 | num数据00001010
0x199007 | num数据00000000
0x199008 | num数据00000000
0x199009 | num数据00000000

4、 任何数据在内存中都是以其二进制补码的形式存储的，低位存储在低字节，高位存储在低字节。


5、 变量的值：存储在变量中的数据。变量的地址： 一个变量是由一个或者多个字节组成的，组成这个变量的低字节的地址，就是这个变量的地址。

6、 如果取出变量的值，直接写上变量的名字就可以取到变量的值。如何取到变量的地址，使用&取地址符，&变量名。在printf函数中，使用%p 格式控制符就是输出变量的地址

7、 什么是指针： 变量的地址就是指针。指针就是地址，地址就是指针!

## 指针变量

1、 指针变量就是专门用来存储地址的变量，专门用来存储另外一个变量的地址，这样我们就说这个指针变量指向了另外一个变量

2、访问一个变量的两种方式：
- 直接访问：int num=100;num=200;
- 间接访问： 可以通过指针变量找到这个指针变量指向的变量。通过指针变量就可以间接的访问这个指向的变量。

通过指针变量可以间接的访问指针变量指向的另外一个变量。

3、 如果声明1个指针变量
- 声明指针变量的语法：
数据类型* 指针变量的名称;
int* p1;
代表声明了一个指针变量，这个指针变量的名字就做p1.这个指针变量的类型是int* 读作int指针。
这个* 代表 这个变量不是一个普通变量，而是一个专门用来存储地址的指针变量。这个p1指针变量中只能存储地址。

- 声明注意：
- * 的位置 可以与数据类型挨在一起，也可以和指针变量名挨在一起，也可以单独写在中间；
- [x] int* p1;
- [x] int *p1;
- [x] int * p1;

- 指针变量是用来存储另外一个变量的地址。但是一个指针变量并不是 可以存储 任意类型的变量地址，而是有限定的，只能存储和这个指针类型相同的 普通变量的地址

int* p1; p1变量中只能存储int类型的地址。
double* p2; p2变量中只能存储double类型的地址

## 指针变量的初始化
1、 不能直接赋值一个非地址类型的常量数据
2、 不能直接赋值一个变量给指针
3、 指针变量是用来存储另外一个变量的地址，并且指针可以用来存储另外一个变量的地址，这个变量的类型是限定的
4、 正确的初始化步骤
- 先取出变量的地址 ，使用&控制符就可以取出变量的地址
- 将取出来的变量地址赋值给指针变量

5、指针变量在内存中也有一个地址，因为指针变量也是一个变量。所以，也可以使用&符号取出指针变量的地址
 int* p1;
 p1 操作的是p1这个指针变量，可以取p1的值，也可以为p1赋值
 &p1 拿到的是p1的地址
 
6、使用指针变量去间接的操作指向的变量
 int num=10;int* p1=&num;*p1=11;
 - *p1 代表p1指针指向的变量，也就是num； *p1 完全等价于 num,可以为指针指向的变量赋值或者取值

## 使用指针变量的时候需要注意的问题


- 可以批量声明指针变量
- int* p1,p2,p3;这样只有p1是int指针类型，p2和p3是int类型
- int* p1,*p2,*p3;这样三个值才都是int指针类型
- 野指针，我们声明一个指针变量，如果没有为其初始化，那么这个时候这个指针变量中是有值的，是垃圾值，随机数。这个时候，我们指针变量就有可能指向一块随机空间。 这块空间：有可能无人使用，也有可能别人使用，也有可能系统使用。
像这样的指针我们就称为野指针

- null值代表指针变量不指向任何内存地址，此时NULL和0是完全等价的，所以可以直接赋值给一个指针变量为0
- 多个指针指向同一个变量
  
```
    int num=10;
    int* p1=&num;
    int* p2=p1;
    *p2=100;
    printf("%d\n",*p1);
    p1和p2指针都指向num变量，无论是*p1,*p2都是间接操作num

```
## 指针作为函数的参数

1、 当函数的参数的类型是float 、double、int的时候，是值传递，在函数内部修改形参的值，对实参变量没有丝毫影响

2、 当函数的参数类型是数组的时候，是地址传递，在函数内部修改形参的值时，其实操作的就是实参变量

3、 当函数的参数类型是指针的时候，在函数内部去访问参数指针指向的变量的时候，其实操作的就是实参变量
4、 应用案例获取数组的最大值和最小值
```
void getArrayMaxAndMin(int arr[],int len,int* max,int* min){
    *max=arr[0];
    *min=arr[0];
    for(int i=0;i<len;i++){
        if(arr[i]>*max){
            *max=arr[i];
        }
        if(arr[i]<*min){
            *min=arr[i];
        }
        
    }
    
}
int main(int argc, const char * argv[]) {
    int arr[]={4,3,90,23,8,1,190,89,82,7883,3,3223};
    int max=0;
    int min=0;
    int len=sizeof(arr)/sizeof(arr[0]);
    getArrayMaxAndMin(arr, len,&max,&min);
    printf("max:%d,min:%d\n",max,min);
    return 0;
}
```

5、 无论指针是什么类型的指针，在内存中都是占据8个字节。既然指针都是占据8个字节，为什么指针还要分类型呢？

如：int num=10; int* p1=&num; p1指针变量中存储的是num变量的地址，也就是num变量的低字节的地址。
通过这个p1指针其实只能找到这个地址的字节
这个时候，通过p1指针找到这个字节 操作的时候，操作多少个字节是根据指针的类型来决定的。指针变量的类型决定了，通过这个指针找到字节以后，可以连续操作多少个字节空间
指针是int* 那么就连续操作4个字节的空间 ；float* 也是 4个字节的连续空间；double* 则是8个字节的连续空间；char* 是 1个字节的连续空间。所以，指针的类型如果不和指向的变量类型相同，那么通过指针则无法正确的操作指向的变量。

## 多级指针
一级指针
1个指针变量中存储的是1个普通变量的地址，叫做一级指针

二级指针
1个指针变量中存储的是

1、n级指针只能存储n-1级指针变量的地址



